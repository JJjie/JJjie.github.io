# 处理并发的一些技巧和思想
### 写在前头
并发，是当前应用级面临的普遍问题，在很多开发场景下都有涉及。最近做的一个微信活动页面，专门研究了这个问题，做一些小的总结

### 数据库的处理（model）
数据库操作是并发过程中出现的最主要的方向，在编程技巧下应注意这么几点

1. **减少对数据库的访问**
  + 数据库独占3306端口，与数据库的交互都是走的端口，网络传输很慢
  + 合并请求，将要得到的最终数据压缩到一个sql中获取
2. **业务层分库分表**
  + 合理的业务分析，横向分库，纵向分表
3. **使用集群与散列**
4. **读写分离**
  + 对于大数据量的表但是对于呈现读写要求不平均的话，读操作与写操作分离
5. **建立高效的索引**
6. **镜像**
镜像是大型网站常采用的提高性能和数据安全性的方式，镜像的技术可以解决不同网络接入商和地域带来的用户访问速度差异，比如ChinaNet和EduNet之间的差异就促使了很多网站在教育网内搭建镜像站点，数据进行定时更新或者实时更新。
7. **memcache分布式缓存**
将系统中价值不大并且不需要即时更新的数据放进memcache中作为临时表来用，相当于在db层前挡了一招~ ~

### 后台控制（controller）
1. **使用缓存**
  + 对于不重要的不禁要的数据使用缓存，减少实时性，减少请求
2. **使用高效的算法**
  + 使用算法提高后端的运算速度
  + 整洁代码
3. **使用队列，控制并发**
  + 参照nodejs的事件驱动，异步加载方式
4. **合理开多进程，多线程，将各部分分开**
5. **注意内存泄露问题**
  + 每一处结尾处注意释放内存

### 前端（view）
1. **使用异步的方式请求数据**
  + ajax，让用户先看到一部分东西
2. **减少加载静态文件**
  + 尽可能合并js，css文件
  + 图片压缩
  + 注：使静态文件占用尽量少的带宽

### 硬件方面
1. **好的数据库**
2. **加大带宽**
3. **使用多机器，负载均衡**
